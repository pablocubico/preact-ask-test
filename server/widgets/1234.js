!function(){"use strict";function e(e){e=e||"";var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n)}function t(e,t,n){this.nodeName=e,this.attributes=t,this.children=n}function n(e,t){for(var n in t)ue.call(t,n)&&(e[n]=t[n]);return e}function o(e){var t={};for(var n in e)t[n]=e[n];return t}function r(e,t){return t=t||{},function(n){return ue.call(t,n)?t[n]:t[n]=e(n)}}function i(e,t){for(var n=t.split("."),o=0;o<n.length&&e;o++)e=e[n];return e}function a(e){for(var t=[],n=e.length;n--;)t[n]=e[n];return t}function s(e){var t="";for(var n in e)if(ue.call(e,n)){var o=e[n];ce(o)||(t+=pe(n),t+=": ",t+=o,"number"!=typeof o||ae[n]||(t+="px"),t+="; ")}return t}function l(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}function u(e,t,n){var o=e[t];o&&!le(o)&&(e[t]=n(o))}function c(e,t,n){return d(me,e,t,n)}function d(e,t,n,o,r){return e[t]?e[t](n,o,r):void 0}function p(e,t){do d(e,t);while(e=e._component)}function h(e,n){var o=arguments.length,r=void 0,i=void 0,a=void 0;if(o>2){r=[];for(var s=2;o>s;s++){var l=arguments[s];if(!de(l)){l.join?i=l:(i=ge,i[0]=l);for(var u=0;u<i.length;u++){var d=i[u],p=!(de(d)||d instanceof t);p&&(d=String(d)),p&&a?r[r.length-1]+=d:de(d)||r.push(d),a=p}}}}n&&n.children&&delete n.children;var h=new t(e,n||void 0,r||void 0);return c("vnode",h),h}function f(e,t,n){var o=t.split("."),r=o[0],a=o.length;return function(t){var s=this,l=e.state,u=l,c=void 0,d=void 0;if(le(n)?(c=i(t,n),ce(c)&&(s=s._component)&&(c=i(s,n))):c=(s.nodeName+s.type).match(/^input(checkbox|radio)$/i)?s.checked:s.value,se(c)&&(c=c.call(s)),a>1){for(d=0;a-1>d;d++)u=u[o[d]]||(u[o[d]]={});u[o[d]]=c,c=l[r]}e.setState(J.defineProperty({},r,c))}}function v(e){1===be.push(e)&&(me.debounceRendering||ye)(y)}function y(){if(be.length){var e=be,t=void 0;for(be=xe,xe=e;t=e.pop();)t._dirty&&E(t)}}function m(e){var t=e.nodeName;return se(t)&&!t.prototype.render}function g(e,t){return e.nodeName(T(e),t||ee)||te}function b(e){return e[re]||(e[re]={})}function x(e){return e.nodeType}function C(e,t){for(var n=t.length,o=n>2,r=o?document.createDocumentFragment():e,i=0;n>i;i++)r.appendChild(t[i]);o&&e.appendChild(r)}function k(e,t,n,o){if("type"!==t&&"style"!==t&&t in e)return e[t];var r=e[re];return o!==!1&&r&&ue.call(r,t)?r[t]:"class"===t?e.className:"style"===t?e.style.cssText:n}function S(e,t,n){"class"===t?e.className=n||"":"style"===t?e.style.cssText=n||"":"dangerouslySetInnerHTML"===t?n&&n.__html&&(e.innerHTML=n.__html):"key"===t||t in e&&"type"!==t?(e[t]=n,de(n)&&e.removeAttribute(t)):w(e,t,n),b(e)[t]=n}function w(e,t,n){if("on"===t.substring(0,2)){var o=Ce(t),r=e._listeners||(e._listeners={}),i=r[o]?n?null:"remove":"add";return i&&e[i+"EventListener"](o,_),void(r[o]=n)}var a="undefined"==typeof n?"undefined":J["typeof"](n);de(n)?e.removeAttribute(t):"function"!==a&&"object"!==a&&e.setAttribute(t,n)}function _(e){var t=this._listeners[Ce(e.type)];return t?t.call(this,c("event",e)||e):void 0}function F(e){return e[re]||N(e)||ee}function N(e){var t=e.attributes;return t&&t.getNamedItem?A(t):t}function A(e){for(var t=void 0,n=e.length;n--;){var o=e[n];t||(t={}),t[o.name]=o.value}return t}function R(e,t){if(m(t))return!0;var n=t.nodeName;return se(n)?e._componentConstructor===n:3===x(e)?le(t):he(e.nodeName)===n}function T(e){var t=o(e.attributes),n=e.children;n&&(t.children=n);var r=e.nodeName.defaultProps;if(r)for(var i in r)!ue.call(r,i)||i in t||(t[i]=r[i]);return t}function O(e){L(e);var t=Se(e.nodeName),n=ke[t];n?n.push(e):ke[t]=[e]}function z(e){var t=Se(e),n=ke[t],o=n&&n.pop()||document.createElement(e);return b(o),o}function L(e){var t=e.parentNode;t&&t.removeChild(e),3!==x(e)&&(e[re]||(e[re]=N(e)),e._component=e._componentConstructor=null)}function B(e,t,n){for(var o=t.attributes;m(t);)t=g(t,n);if(se(t.nodeName))return G(e,t,n);if(le(t)){if(e){var r=x(e);if(3===r)return e[oe]=t,e;1===r&&O(e)}return document.createTextNode(t)}var i=e,s=t.nodeName||ie;return e?he(e.nodeName)!==s&&(i=z(s),C(i,a(e.childNodes)),W(e)):i=z(s),M(i,t,n),j(i,t),o&&o.ref&&(i[re].ref=o.ref)(i),i}function M(e,t,n){var o=void 0,r=void 0,i=0,a=e.childNodes.length,s=0;if(a){o=[];for(var l=0;a>l;l++){var u=e.childNodes[l],c=u._component&&u._component.props,d=c?c.key:k(u,"key");ce(d)?o[s++]=u:(r||(r={}),r[d]=u,i++)}}var h=t.children,f=h&&h.length,v=0;if(f)for(var y=0;f>y;y++){var m=h[y],g=void 0;if(i){var b=m.attributes,x=b&&b.key;!ce(x)&&ue.call(r,x)&&(g=r[x],r[x]=null,i--)}if(!g&&s>v)for(var C=v;s>C;C++){var S=o[C];if(S&&R(S,m)){g=S,o[C]=null,C===s-1&&s--,C===v&&v++;break}}if(g=B(g,m,n),e.childNodes[y]!==g){var w=g.parentNode!==e&&g._component,_=e.childNodes[y+1];w&&p(w,"componentWillMount"),_?e.insertBefore(g,_):e.appendChild(g),w&&p(w,"componentDidMount")}}if(i)for(var F in r)ue.call(r,F)&&r[F]&&(o[v=s++]=r[F]);s>v&&P(o)}function P(e,t){for(var n=e.length;n--;){var o=e[n];o&&W(o,t)}}function W(e,t){var n=e[re];n&&d(n,"ref",null);var o=e._component;if(o)K(e,o,!t);else{if(!t){if(1!==x(e)){var r=e.parentNode;return void(r&&r.removeChild(e))}O(e)}var i=e.childNodes;i&&i.length&&P(i,t)}}function j(e,t){var n=F(e)||ee,o=t.attributes||ee,r=void 0,i=void 0;for(r in n)ce(o[r])&&S(e,r,null);if(o!==ee)for(r in o)ue.call(o,r)&&(i=o[r],ce(i)||i==k(e,r)||S(e,r,i))}function U(e){var t=e.constructor.name,n=we[t];n?n.push(e):we[t]=[e]}function H(e,t,n){for(var o=we[e.name],r=o&&o.length,i=void 0,a=0;r>a;a++)if(i=o[a],i.constructor===e)return o.splice(a,1),i;return new e(t,n)}function D(e){e._dirty||(e._dirty=!0,v(e))}function q(e,t,n,o){var r=e._disableRendering;e._ref=t.ref,delete t.ref,delete t.key,e._disableRendering=!0,o&&(e.prevContext||(e.prevContext=e.context),e.context=o),e.base&&d(e,"componentWillReceiveProps",t,e.context),e.prevProps||(e.prevProps=e.props),e.props=t,e._disableRendering=r,n&&n.render===!1||(n&&n.renderSync||me.syncComponentUpdates!==!1?E(e):D(e)),d(e,"_ref",e)}function E(e,t){if(!e._disableRendering){var n=void 0,o=void 0,r=e.props,i=e.state,a=e.context,s=e.prevProps||r,l=e.prevState||i,u=e.prevContext||a,c=e.base;if(c&&(e.props=s,e.state=l,e.context=u,d(e,"shouldComponentUpdate",r,i,a)===!1?n=!0:d(e,"componentWillUpdate",r,i,a),e.props=r,e.state=i,e.context=a),e.prevProps=e.prevState=e.prevContext=null,e._dirty=!1,!n){o=d(e,"render",r,i,a);var h=o&&o.nodeName,f=e.getChildContext?e.getChildContext():a,v=void 0,y=void 0;if(se(h)&&h.prototype.render){var m=e._component;m&&m.constructor!==h&&(v=m,m=null);var g=T(o);m?q(m,g,X,f):(m=H(h,g,f),m._parentComponent=e,e._component=m,e.base&&p(m,"componentWillMount"),q(m,g,Q,f),E(m,Y),e.base&&p(m,"componentDidMount")),y=m.base}else{var b=e.base;v=e._component,v&&(b=e._component=null),(e.base||t&&t.build)&&(y=B(b,o||te,f))}if(e.base&&y!==e.base){var x=e.base.parentNode;x&&x.replaceChild(y,e.base)}if(v&&K(v.base,v,!0),e.base=y,y){for(var C=e,k=e;k=k._parentComponent;)C=k;y._component=C,y._componentConstructor=C.constructor}c&&d(e,"componentDidUpdate",s,l,u)}var S=e._renderCallbacks,w=void 0;if(S)for(;w=S.pop();)w.call(e);return o}}function G(e,t,n){for(var o=e&&e._component,r=e,i=o&&e._componentConstructor===t.nodeName;o&&!i&&(o=o._parentComponent);)i=o.constructor===t.nodeName;return i?(q(o,T(t),X,n),e=o.base):(o&&(K(e,o,!0),e=r=null),e=I(t,e,n),r&&e!==r&&W(r)),e}function I(e,t,n){var o=T(e),r=H(e.nodeName,o,n);return t&&!r.base&&(r.base=t),q(r,o,Q,n),E(r,Y),r.base}function K(e,t,n){d(t,"_ref",null),d(t,"componentWillUnmount");var o=t._component;o&&K(e,o);var r=t.base;if(r){if(n!==!1){var i=r.parentNode;i&&i.removeChild(r)}P(r.childNodes,!0)}n&&(t._parentComponent=null,U(t)),d(t,"componentDidUnmount")}function V(e,t){this._dirty=this._disableRendering=!1,this._linkedStates={},this._renderCallbacks=[],this.prevState=this.prevProps=this.prevContext=this.base=this._parentComponent=this._component=this._ref=null,this.context=t||{},this.props=e||{},this.state=d(this,"getInitialState")||{}}function $(e,t,n){var o=n&&n._component&&n._componentConstructor===e.nodeName,r=B(n,e),i=!o&&r._component;return i&&p(i,"componentWillMount"),r.parentNode!==t&&t.appendChild(r),i&&p(i,"componentDidMount"),r}var Z={form:{saveDestination:"http://coralasks.theguardian.com/ask/44",page:{id:1,name:"first_page",children:[{type:"separator",component:"Header",props:{text:"An amazing Ask."}},{type:"field",component:"TextField",props:{maxLength:100,title:"Would you impersonate others?",required:!0}},{type:"field",component:"TextField",props:{maxLength:100,title:"Are you here just to troll or annoy people?",required:!0}},{type:"field",component:"TextField",props:{maxLength:100,title:"Would you reveal other person's personal data?",required:!0}},{type:"field",component:"TextArea",props:{maxLength:400,title:"Please paste a comment from you on another site"}},{type:"field",component:"Rating",props:{steps:5,title:"Rate yourself as a commenteer"}},{type:"field",component:"Audio",props:{steps:5,title:"Explain why should we let yourself comment on our site"}}]}}},J={};J["typeof"]="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},J.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},J.createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),J.defineProperty=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},J["extends"]=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},J.inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},J.possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t};var Q={render:!1},X={renderSync:!0},Y={build:!0},ee={},te="",ne="undefined"!=typeof document,oe=!ne||"textContent"in document?"textContent":"nodeValue",re="undefined"!=typeof Symbol?Symbol("preactattr"):"__preactattr_",ie="undefined",ae={boxFlex:1,boxFlexGroup:1,columnCount:1,fillOpacity:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,fontWeight:1,lineClamp:1,lineHeight:1,opacity:1,order:1,orphans:1,strokeOpacity:1,widows:1,zIndex:1,zoom:1},se=function(e){return"function"==typeof e},le=function(e){return"string"==typeof e},ue={}.hasOwnProperty,ce=function(e){return null==e},de=function(e){return e===!1||null==e},pe=r(function(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}),he=r(function(e){return e.toLowerCase()}),fe=void 0;try{fe=new MessageChannel}catch(ve){}var ye=fe?function(e){fe.port1.onmessage=e,fe.port2.postMessage("")}:setTimeout,me={vnode:function(e){var t=e.attributes;if(t&&!se(e.nodeName)){var n=t.className;n&&(t["class"]=n,delete t.className),t["class"]&&u(t,"class",l),t.style&&u(t,"style",s)}}},ge=[],be=[],xe=[],Ce=r(function(e){return e.replace(/^on/i,"").toLowerCase()}),ke={},Se=r(function(e){return e.toUpperCase()}),we={};n(V.prototype,{linkState:function(e,t){var n=this._linkedStates,o=e+"|"+(t||"");return n[o]||(n[o]=f(this,e,t))},setState:function(e,t){var r=this.state;this.prevState||(this.prevState=o(r)),n(r,se(e)?e(r,this.props):e),t&&this._renderCallbacks.push(t),D(this)},forceUpdate:function(){E(this)},render:function(){return null}});var _e={h:h,Component:V,render:$,rerender:y,options:me,hooks:me},Fe=_e.Component,Ne=_e.h,Ae=function(e){function t(e,n){J.classCallCheck(this,t);var o=J.possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e,n));return o.state={rating:0,hovering:0,focused:-1},o}return J.inherits(t,e),J.createClass(t,[{key:"getStyles",value:function(){return J["extends"]({},Re.base,this.props.isValid?Re.valid:Re.error)}},{key:"onBlur",value:function(){this.setState({focused:-1})}},{key:"onFocus",value:function(e,t){this.setState({focused:e}),this.props.onFocus()}},{key:"onHover",value:function(e,t){this.setState({hovering:e})}},{key:"onMouseOut",value:function(){this.setState({hovering:0})}},{key:"getTokenStyle",value:function(e){return J["extends"]({},Re.token,e==this.state.focused?Re.focused:{},e<this.state.hovering?Re.hovering:{})}},{key:"getTokens",value:function(){for(var e=[],t=this.props.steps||5,n=0;t>n;n++)e.push(Ne("button",{onBlur:this.onBlur.bind(this),onFocus:this.onFocus.bind(this,n),onMouseOver:this.onHover.bind(this,n+1),style:this.getTokenStyle(n)},"★"));return e}},{key:"getTitleStyles",value:function(){return J["extends"]({},this.props.hasFocus?Re.focusedTitle:{})}},{key:"render",value:function(){return Ne("div",{style:Re.base,onMouseOut:this.onMouseOut.bind(this)},this.props.title?Ne("h3",{style:this.getTitleStyles()},this.props.title):null,this.getTokens().map(function(e){return e}))}}]),t}(Fe),Re={base:{display:"block",color:"#888",width:"90%",outline:"none",border:"none",minHeight:"100px"},token:{fontSize:"50px",cursor:"pointer",color:"#777",lineHeight:"50px",transition:"color .2s",background:"none",border:"none",outline:"none"},hovering:{color:"#EF5350"},focused:{color:"#42A5F5"},focusedTitle:{color:"#009688"}},Te=_e.h,Oe=_e.Component,ze=function(e){function t(e,n){J.classCallCheck(this,t);var o=J.possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e,n));return o.state={recording:!1,initialized:!1,recorded:!1,recordedAudioURL:""},o}return J.inherits(t,e),J.createClass(t,[{key:"initAudio",value:function(){navigator.getUserMedia||(navigator.getUserMedia=navigator.webkitGetUserMedia||navigator.mozGetUserMedia),navigator.cancelAnimationFrame||(navigator.cancelAnimationFrame=navigator.webkitCancelAnimationFrame||navigator.mozCancelAnimationFrame),navigator.requestAnimationFrame||(navigator.requestAnimationFrame=navigator.webkitRequestAnimationFrame||navigator.mozRequestAnimationFrame),navigator.getUserMedia({audio:{mandatory:{googEchoCancellation:"false",googAutoGainControl:"false",googNoiseSuppression:"false",googHighpassFilter:"false"},optional:[]}},this.audioInitialized.bind(this),function(e){console.log("Error getting audio"),console.log(e)})}},{key:"audioInitialized",value:function(e){this.setState({recording:!0}),this.stream=e,this.audioChunks=[],this.mediaRecorder=new MediaRecorder(this.stream),this.mediaRecorder.start();var t=this.audioChunks;this.mediaRecorder.ondataavailable=function(e){t.push(e.data)},AudioContext=window.AudioContext||window.webkitAudioContext;var n=new AudioContext,o=null,r=null,i=null;this.rafID=null,this.analyserContext=null,this.canvasWidth=null,this.canvasHeight=null;i=n.createGain(),r=n.createMediaStreamSource(this.stream),o=r,o.connect(i),this.analyserNode=n.createAnalyser(),this.analyserNode.fftSize=2048,i.connect(this.analyserNode),this.zeroGain=n.createGain(),this.zeroGain.gain.value=0,i.connect(this.zeroGain),this.zeroGain.connect(n.destination);var a=this.updateAnalysers.bind(this);a()}},{key:"updateAnalysers",value:function(e){if(!this.analyserContext){var t=document.querySelector("canvas");this.canvasWidth=t.width,this.canvasHeight=t.height,this.analyserContext=t.getContext("2d")}var n=3,o=20,r=Math.round(this.canvasWidth/(n+o)),i=new Uint8Array(this.analyserNode.frequencyBinCount);this.analyserNode.getByteFrequencyData(i),this.analyserContext.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.analyserContext.fillStyle="#F6D565",this.analyserContext.lineCap="round";for(var a=this.analyserNode.frequencyBinCount/r,s=0;r>s;++s){for(var l=0,u=Math.floor(s*a),c=0;a>c;c++)l+=i[u+c];l/=a,this.analyserContext.fillStyle="hsl( "+Math.round(90*s/r-50)+", 100%, 50%)",this.analyserContext.fillRect(s*(n+o),this.canvasHeight,o,-l)}this.state.recording&&(this.rafID=window.requestAnimationFrame(this.updateAnalysers.bind(this)))}},{key:"onRecordClick",value:function(){if(this.state.recording){this.setState({recording:!1}),this.mediaRecorder.stop();var e=new Blob(this.audioChunks,{type:"audio/ogg;"}),t=window.URL.createObjectURL(e);this.stream.getAudioTracks()[0].stop();var n,o=new FileReader,r=this;o.onload=function(){n=this.result;var e=r.drawWaveform.bind(r);e(n)},o.readAsArrayBuffer(e),this.setState({recordedAudioURL:t,recorded:!0})}else this.setState({recorded:!1}),this.initAudio()}},{key:"drawWaveform",value:function(e){var t=new Uint8Array(e),n=document.querySelector("canvas"),o=n.width,r=n.height,i=n.getContext("2d"),a=Math.ceil(t.length/o),s=r/2;i.fillStyle="#F77160",i.clearRect(0,0,o,r);for(var l=0;o>l;l++){for(var u=1,c=-1,d=0;a>d;d++){var p=(t[l*a+d]-127)/127;u>p&&(u=p),p>c&&(c=p)}i.fillRect(l,(1+u)*s,1,Math.max(1,(c-u)*s))}}},{key:"getButtonStyle",value:function(){return J["extends"]({},this.state.recording?Le.stopButton:Le.recButton)}},{key:"onPlayClick",value:function(){var e=document.querySelector("audio");e.play()}},{key:"onFocus",value:function(){this.props.onFocus()}},{key:"render",value:function(){return Te("div",{style:Le.base},Te("div",{style:Le.buttonAndSpectrum},Te("button",{style:this.getButtonStyle(),onFocus:this.onFocus.bind(this),onClick:this.onRecordClick.bind(this)},this.state.recording?"STOP":"REC"),Te("canvas",{style:Le.spectrumAnalyzer,width:"1024",height:"80"}),this.state.recorded?Te("span",{onClick:this.onPlayClick.bind(this),style:Le.playSymbol},"▶"):null),Te("audio",{src:this.state.recordedAudioURL}),this.state.recording?Te("h2",null,"Recording..."):null)}}]),t}(Oe),Le={base:{display:"block",color:"#888",padding:"20px 5%",width:"90%",border:"none",minHeight:"100px"},recButton:{width:"80px",height:"80px",background:"#C62828",color:"white",textAlign:"center",cursor:"pointer",borderRadius:"40px",transition:"all 1s",boxShadow:"0 7px 8px #CCC",flexShrink:"0",marginRight:"10px",border:"none",outline:"none"},stopButton:{width:"80px",height:"80px",background:"#37474F",color:"white",textAlign:"center",cursor:"pointer",borderRadius:"3px",transition:"all 1s",boxShadow:"0 7px 8px #CCC",flexShrink:"0",marginRight:"10px",border:"none",outline:"none"},spectrumAnalyzer:{background:"#f0f0f0",flexGrow:"1",width:"10%"},buttonAndSpectrum:{display:"flex",position:"relative"},playSymbol:{color:"white",background:"rgba(0,0,0,.2)",position:"absolute",top:"15px",right:"170px",fontSize:"35px",borderRadius:"40px",width:"50px",height:"50px",display:"block",border:"2px solid white",textAlign:"center",lineHeight:"46px",paddingLeft:"2px",cursor:"pointer"}},Be=_e.h,Me=_e.Component,Pe=function(e){function t(e,n){J.classCallCheck(this,t);var o=J.possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e,n));return o.state={focused:!1,text:o.props.text||"",height:"100px"},o}return J.inherits(t,e),J.createClass(t,[{key:"handleChange",value:function(e){var t=Math.max(parseInt(e.target.style.height),e.target.scrollHeight-40);this.setState({text:e.target.value,height:t})}},{key:"getStyles",value:function(){return J["extends"]({},We.base,this.props.isValid?We.valid:We.error,this.state.focused?We.focused:{},{height:this.state.height})}},{key:"getTitleStyles",value:function(){return J["extends"]({},this.state.focused?We.focusedTitle:{})}},{key:"onBlur",value:function(){this.setState({focused:!1})}},{key:"onFocus",value:function(){this.setState({focused:!0}),this.props.onFocus()}},{key:"render",value:function(){return Be("div",null,this.props.title?Be("h3",{style:this.getTitleStyles()},this.props.title):null,Be("textarea",{style:this.getStyles(),placeholder:this.props.placeholder,defaultValue:this.state.text,onBlur:this.onBlur.bind(this),onFocus:this.onFocus.bind(this),onChange:this.handleChange.bind(this),maxLength:this.props.maxLength?this.props.maxLength:"auto"}),this.props.maxLength?Be("div",{style:We.remaining},this.props.maxLength-this.state.text.length," chars remaining."):null)}}]),t}(Me),We={base:{display:"block",fontSize:"14pt",color:"black",padding:"0 0 10px 0",width:"100%",outline:"none",resize:"none",borderTop:"none",borderLeft:"none",borderRight:"none",borderBottom:"2px solid #999",transition:"border .5s"},focused:{borderBottom:"2px solid #009688"},focusedTitle:{color:"#009688"},valid:{},error:{},remaining:{color:"#999",fontSize:"10pt",textAlign:"right",width:"100%",marginTop:"20px"}},je=_e.h,Ue=_e.Component,He=function(e){function t(e,n){J.classCallCheck(this,t);var o=J.possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e,n));return o.state={text:o.props.text||""},o}return J.inherits(t,e),J.createClass(t,[{key:"onKeyDown",value:function(e){this.setState({text:e.target.value})}},{key:"onChange",value:function(e){this.setState({text:e.target.value})}},{key:"onBlur",value:function(){this.setState({focused:!1})}},{key:"onFocus",value:function(){this.setState({focused:!0}),this.props.onFocus()}},{key:"getStyles",value:function(){return J["extends"]({},De.base,this.props.isValid?De.valid:De.error,this.state.focused?De.focused:{})}},{key:"getTitleStyles",value:function(){return J["extends"]({},this.state.focused?De.focusedTitle:{})}},{key:"render",value:function(){return je("div",null,this.props.title?je("h3",{style:this.getTitleStyles()},this.props.title):null,je("input",{type:"text",style:this.getStyles(),placeholder:this.props.placeholder,defaultValue:this.state.text,onFocus:this.onFocus.bind(this),onBlur:this.onBlur.bind(this),onChange:this.onChange.bind(this),onKeyDown:this.onKeyDown.bind(this),maxLength:this.props.maxLength?this.props.maxLength:"auto"}),this.props.maxLength?je("div",{style:De.remaining},this.props.maxLength-this.state.text.length," chars remaining."):null)}}]),t}(Ue),De={base:{display:"block",fontSize:"14pt",color:"black",padding:"0 0 10px 0",width:"100%",outline:"none",resize:"none",borderLeft:"none",borderRight:"none",borderTop:"none",borderBottom:"2px solid #999",transition:"border .5s"},focused:{borderBottom:"2px solid #009688"},focusedTitle:{color:"#009688"},valid:{},error:{},remaining:{color:"#999",fontSize:"10pt",padding:"0px",textAlign:"right",width:"100%",marginTop:"5px"}},qe=_e.h,Ee=_e.Component,Ge=function(e){function t(e,n){J.classCallCheck(this,t);var o=J.possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e,n));return o.state={text:o.props.text||""},o}return J.inherits(t,e),J.createClass(t,[{key:"render",value:function(){return qe("header",{style:Ie.base},qe("h1",{style:Ie.h1},this.props.text))}}]),t}(Ee),Ie={base:{display:"block",background:"#1565C0",padding:"40px 20px"},h1:{fontSize:"18pt",fontWeight:"600",color:"white"}},Ke=Ae,Ve=ze,$e=Pe,Ze=He,Je=Ge,Qe=Object.freeze({Rating:Ke,Audio:Ve,TextArea:$e,TextField:Ze,Header:Je}),Xe=_e.h,Ye=_e.Component,et=function(e){function t(e,n){J.classCallCheck(this,t);var o=J.possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e,n));return o.state={},o}return J.inherits(t,e),J.createClass(t,[{key:"render",value:function(){return Xe("div",{style:tt.base},Xe(Qe[this.props.component],J["extends"]({},this.props)))}}]),t}(Ye),tt={base:{}},nt=_e.h,ot=_e.Component,rt=function(e){function t(e,n){J.classCallCheck(this,t);var o=J.possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e,n));return o.state={currentStep:0,showFieldNumbers:!0},o}return J.inherits(t,e),J.createClass(t,[{key:"onFocus",value:function(e){this.setState({currentStep:e})}},{key:"getFieldWrapperStyles",value:function(e,t){return J["extends"]({},it.formFieldWrapper,this.state.currentStep==t?it.focused:it.blurred,"field"==e.type?it.withNumber:"")}},{key:"previousStep",value:function(){this.setState({currentStep:this.state.currentStep-1})}},{key:"nextStep",value:function(){this.setState({currentStep:this.state.currentStep+1})}},{key:"onKeyDown",value:function(e){console.log(e,this.state.currentStep)}},{key:"render",value:function(){var e=this;return nt("div",{style:it.base,onKeyDown:this.onKeyDown.bind(this)},this.props.form.page.children.map(function(t,n){return nt("div",{style:e.getFieldWrapperStyles(t,n)},e.state.showFieldNumbers?nt("span",{style:it.fieldNumber},n+1,"."):null,nt(et,J["extends"]({component:t.component,key:n,index:n,focusable:t.focusable,hasFocus:e.state.currentStep==n,onFocus:e.onFocus.bind(e,n)},t.props)))}))}}]),t}(ot),it={base:{background:"#eee"},formFieldWrapper:{borderBottom:"1px solid #999",transition:"opacity .5s",position:"relative",background:"white"},withNumber:{padding:"15px 15px 15px 40px"},fieldNumber:{color:"#777",position:"absolute",top:"15px",left:"0px",width:"30px",textAlign:"right"},blurred:{opacity:.4},focused:{opacity:1}};e(" \n* { font-family: 'Roboto', Helvetica, arial, sans-serif; }\n  \nhtml, body {    \n	height: 100%;      \n	width: 100%;   \n	padding: 40px;   \n	margin: 0;    \n	font-family: 'Roboto', Helvetica, arial, sans-serif;\n	font-weight: 400;\n	color: #444;\n	-webkit-font-smoothing: antialiased;\n	-moz-osx-font-smoothing: grayscale;\n\n  \n	background: #2c3e50; /* fallback for old browsers */\n	background: -webkit-linear-gradient(to left, #2c3e50 , #3498db); /* Chrome 10-25, Safari 5.1-6 */\n	background: linear-gradient(to left, #2c3e50 , #3498db); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */\n}\n\nh3 {\n	font-size: 11pt;\n	margin: 0 0 10px 0 ;\n	color: #999;\n}\n\n* {\n	box-sizing: border-box;\n}\n\n#app {\n	height: 100%;\n}\n");var at=_e.h;_e.render(at("div",null,at(rt,Z)),document.body)}();