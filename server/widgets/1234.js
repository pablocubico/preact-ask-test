!function(){"use strict";function e(e,t,n){this.nodeName=e,this.attributes=t,this.children=n}function t(e,t){for(var n in t)le.call(t,n)&&(e[n]=t[n]);return e}function n(e){var t={};for(var n in e)t[n]=e[n];return t}function o(e,t){return t=t||{},function(n){return le.call(t,n)?t[n]:t[n]=e(n)}}function r(e,t){for(var n=t.split("."),o=0;o<n.length&&e;o++)e=e[n];return e}function i(e){for(var t=[],n=e.length;n--;)t[n]=e[n];return t}function s(e){var t="";for(var n in e)if(le.call(e,n)){var o=e[n];ue(o)||(t+=de(n),t+=": ",t+=o,"number"!=typeof o||ie[n]||(t+="px"),t+="; ")}return t}function a(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}function l(e,t,n){var o=e[t];o&&!ae(o)&&(e[t]=n(o))}function u(e,t,n){return c(ye,e,t,n)}function c(e,t,n,o,r){return e[t]?e[t](n,o,r):void 0}function d(e,t){do c(e,t);while(e=e._component)}function p(t,n){var o=arguments.length,r=void 0,i=void 0,s=void 0;if(o>2){r=[];for(var a=2;o>a;a++){var l=arguments[a];if(!ce(l)){l.join?i=l:(i=me,i[0]=l);for(var c=0;c<i.length;c++){var d=i[c],p=!(ce(d)||d instanceof e);p&&(d=String(d)),p&&s?r[r.length-1]+=d:ce(d)||r.push(d),s=p}}}}n&&n.children&&delete n.children;var h=new e(t,n||void 0,r||void 0);return u("vnode",h),h}function h(e,t,n){var o=t.split("."),i=o[0],s=o.length;return function(t){var a=this,l=e.state,u=l,c=void 0,d=void 0;if(ae(n)?(c=r(t,n),ue(c)&&(a=a._component)&&(c=r(a,n))):c=(a.nodeName+a.type).match(/^input(checkbox|radio)$/i)?a.checked:a.value,se(c)&&(c=c.call(a)),s>1){for(d=0;s-1>d;d++)u=u[o[d]]||(u[o[d]]={});u[o[d]]=c,c=l[i]}e.setState(Z.defineProperty({},i,c))}}function f(e){1===ge.push(e)&&(ye.debounceRendering||ve)(v)}function v(){if(ge.length){var e=ge,t=void 0;for(ge=be,be=e;t=e.pop();)t._dirty&&q(t)}}function y(e){var t=e.nodeName;return se(t)&&!t.prototype.render}function m(e,t){return e.nodeName(R(e),t||Y)||ee}function g(e){return e[oe]||(e[oe]={})}function b(e){return e.nodeType}function x(e,t){for(var n=t.length,o=n>2,r=o?document.createDocumentFragment():e,i=0;n>i;i++)r.appendChild(t[i]);o&&e.appendChild(r)}function C(e,t,n,o){if("type"!==t&&"style"!==t&&t in e)return e[t];var r=e[oe];return o!==!1&&r&&le.call(r,t)?r[t]:"class"===t?e.className:"style"===t?e.style.cssText:n}function k(e,t,n){"class"===t?e.className=n||"":"style"===t?e.style.cssText=n||"":"dangerouslySetInnerHTML"===t?n&&n.__html&&(e.innerHTML=n.__html):"key"===t||t in e&&"type"!==t?(e[t]=n,ce(n)&&e.removeAttribute(t)):S(e,t,n),g(e)[t]=n}function S(e,t,n){if("on"===t.substring(0,2)){var o=xe(t),r=e._listeners||(e._listeners={}),i=r[o]?n?null:"remove":"add";return i&&e[i+"EventListener"](o,w),void(r[o]=n)}var s="undefined"==typeof n?"undefined":Z["typeof"](n);ce(n)?e.removeAttribute(t):"function"!==s&&"object"!==s&&e.setAttribute(t,n)}function w(e){var t=this._listeners[xe(e.type)];return t?t.call(this,u("event",e)||e):void 0}function _(e){return e[oe]||F(e)||Y}function F(e){var t=e.attributes;return t&&t.getNamedItem?A(t):t}function A(e){for(var t=void 0,n=e.length;n--;){var o=e[n];t||(t={}),t[o.name]=o.value}return t}function N(e,t){if(y(t))return!0;var n=t.nodeName;return se(n)?e._componentConstructor===n:3===b(e)?ae(t):pe(e.nodeName)===n}function R(e){var t=n(e.attributes),o=e.children;o&&(t.children=o);var r=e.nodeName.defaultProps;if(r)for(var i in r)!le.call(r,i)||i in t||(t[i]=r[i]);return t}function T(e){L(e);var t=ke(e.nodeName),n=Ce[t];n?n.push(e):Ce[t]=[e]}function O(e){var t=ke(e),n=Ce[t],o=n&&n.pop()||document.createElement(e);return g(o),o}function L(e){var t=e.parentNode;t&&t.removeChild(e),3!==b(e)&&(e[oe]||(e[oe]=F(e)),e._component=e._componentConstructor=null)}function M(e,t,n){for(var o=t.attributes;y(t);)t=m(t,n);if(se(t.nodeName))return G(e,t,n);if(ae(t)){if(e){var r=b(e);if(3===r)return e[ne]=t,e;1===r&&T(e)}return document.createTextNode(t)}var s=e,a=t.nodeName||re;return e?pe(e.nodeName)!==a&&(s=O(a),x(s,i(e.childNodes)),B(e)):s=O(a),P(s,t,n),j(s,t),o&&o.ref&&(s[oe].ref=o.ref)(s),s}function P(e,t,n){var o=void 0,r=void 0,i=0,s=e.childNodes.length,a=0;if(s){o=[];for(var l=0;s>l;l++){var u=e.childNodes[l],c=u._component&&u._component.props,p=c?c.key:C(u,"key");ue(p)?o[a++]=u:(r||(r={}),r[p]=u,i++)}}var h=t.children,f=h&&h.length,v=0;if(f)for(var y=0;f>y;y++){var m=h[y],g=void 0;if(i){var b=m.attributes,x=b&&b.key;!ue(x)&&le.call(r,x)&&(g=r[x],r[x]=null,i--)}if(!g&&a>v)for(var k=v;a>k;k++){var S=o[k];if(S&&N(S,m)){g=S,o[k]=null,k===a-1&&a--,k===v&&v++;break}}if(g=M(g,m,n),e.childNodes[y]!==g){var w=g.parentNode!==e&&g._component,_=e.childNodes[y+1];w&&d(w,"componentWillMount"),_?e.insertBefore(g,_):e.appendChild(g),w&&d(w,"componentDidMount")}}if(i)for(var F in r)le.call(r,F)&&r[F]&&(o[v=a++]=r[F]);a>v&&z(o)}function z(e,t){for(var n=e.length;n--;){var o=e[n];o&&B(o,t)}}function B(e,t){var n=e[oe];n&&c(n,"ref",null);var o=e._component;if(o)I(e,o,!t);else{if(!t){if(1!==b(e)){var r=e.parentNode;return void(r&&r.removeChild(e))}T(e)}var i=e.childNodes;i&&i.length&&z(i,t)}}function j(e,t){var n=_(e)||Y,o=t.attributes||Y,r=void 0,i=void 0;for(r in n)ue(o[r])&&k(e,r,null);if(o!==Y)for(r in o)le.call(o,r)&&(i=o[r],ue(i)||i==C(e,r)||k(e,r,i))}function U(e){var t=e.constructor.name,n=Se[t];n?n.push(e):Se[t]=[e]}function W(e,t,n){for(var o=Se[e.name],r=o&&o.length,i=void 0,s=0;r>s;s++)if(i=o[s],i.constructor===e)return o.splice(s,1),i;return new e(t,n)}function D(e){e._dirty||(e._dirty=!0,f(e))}function H(e,t,n,o){var r=e._disableRendering;e._ref=t.ref,delete t.ref,delete t.key,e._disableRendering=!0,o&&(e.prevContext||(e.prevContext=e.context),e.context=o),e.base&&c(e,"componentWillReceiveProps",t,e.context),e.prevProps||(e.prevProps=e.props),e.props=t,e._disableRendering=r,n&&n.render===!1||(n&&n.renderSync||ye.syncComponentUpdates!==!1?q(e):D(e)),c(e,"_ref",e)}function q(e,t){if(!e._disableRendering){var n=void 0,o=void 0,r=e.props,i=e.state,s=e.context,a=e.prevProps||r,l=e.prevState||i,u=e.prevContext||s,p=e.base;if(p&&(e.props=a,e.state=l,e.context=u,c(e,"shouldComponentUpdate",r,i,s)===!1?n=!0:c(e,"componentWillUpdate",r,i,s),e.props=r,e.state=i,e.context=s),e.prevProps=e.prevState=e.prevContext=null,e._dirty=!1,!n){o=c(e,"render",r,i,s);var h=o&&o.nodeName,f=e.getChildContext?e.getChildContext():s,v=void 0,y=void 0;if(se(h)&&h.prototype.render){var m=e._component;m&&m.constructor!==h&&(v=m,m=null);var g=R(o);m?H(m,g,Q,f):(m=W(h,g,f),m._parentComponent=e,e._component=m,e.base&&d(m,"componentWillMount"),H(m,g,J,f),q(m,X),e.base&&d(m,"componentDidMount")),y=m.base}else{var b=e.base;v=e._component,v&&(b=e._component=null),(e.base||t&&t.build)&&(y=M(b,o||ee,f))}if(e.base&&y!==e.base){var x=e.base.parentNode;x&&x.replaceChild(y,e.base)}if(v&&I(v.base,v,!0),e.base=y,y){for(var C=e,k=e;k=k._parentComponent;)C=k;y._component=C,y._componentConstructor=C.constructor}p&&c(e,"componentDidUpdate",a,l,u)}var S=e._renderCallbacks,w=void 0;if(S)for(;w=S.pop();)w.call(e);return o}}function G(e,t,n){for(var o=e&&e._component,r=e,i=o&&e._componentConstructor===t.nodeName;o&&!i&&(o=o._parentComponent);)i=o.constructor===t.nodeName;return i?(H(o,R(t),Q,n),e=o.base):(o&&(I(e,o,!0),e=r=null),e=E(t,e,n),r&&e!==r&&B(r)),e}function E(e,t,n){var o=R(e),r=W(e.nodeName,o,n);return t&&!r.base&&(r.base=t),H(r,o,J,n),q(r,X),r.base}function I(e,t,n){c(t,"_ref",null),c(t,"componentWillUnmount");var o=t._component;o&&I(e,o);var r=t.base;if(r){if(n!==!1){var i=r.parentNode;i&&i.removeChild(r)}z(r.childNodes,!0)}n&&(t._parentComponent=null,U(t)),c(t,"componentDidUnmount")}function K(e,t){this._dirty=this._disableRendering=!1,this._linkedStates={},this._renderCallbacks=[],this.prevState=this.prevProps=this.prevContext=this.base=this._parentComponent=this._component=this._ref=null,this.context=t||{},this.props=e||{},this.state=c(this,"getInitialState")||{}}function V(e,t,n){var o=n&&n._component&&n._componentConstructor===e.nodeName,r=M(n,e),i=!o&&r._component;return i&&d(i,"componentWillMount"),r.parentNode!==t&&t.appendChild(r),i&&d(i,"componentDidMount"),r}var $={form:{saveDestination:"http://coralasks.theguardian.com/ask/44",page:{id:1,name:"first_page",children:[{type:"separator",component:"Header",props:{text:"An amazing Ask."}},{type:"field",component:"TextField",props:{maxLength:100,title:"Would you impersonate others?",required:!0}},{type:"field",component:"TextField",props:{maxLength:100,title:"Are you here just to troll or annoy people?",required:!0}},{type:"field",component:"TextField",props:{maxLength:100,title:"Would you reveal other person's personal data?",required:!0}},{type:"field",component:"TextArea",props:{maxLength:400,title:"Please paste a comment from you on another site"}},{type:"field",component:"Rating",props:{steps:5,title:"Rate yourself as a commenteer"}},{type:"field",component:"Audio",props:{steps:5,title:"Explain why should we let yourself comment on our site"}}]}}},Z={};Z["typeof"]="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},Z.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Z.createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),Z.defineProperty=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},Z["extends"]=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Z.inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Z.possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t};var J={render:!1},Q={renderSync:!0},X={build:!0},Y={},ee="",te="undefined"!=typeof document,ne=!te||"textContent"in document?"textContent":"nodeValue",oe="undefined"!=typeof Symbol?Symbol("preactattr"):"__preactattr_",re="undefined",ie={boxFlex:1,boxFlexGroup:1,columnCount:1,fillOpacity:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,fontWeight:1,lineClamp:1,lineHeight:1,opacity:1,order:1,orphans:1,strokeOpacity:1,widows:1,zIndex:1,zoom:1},se=function(e){return"function"==typeof e},ae=function(e){return"string"==typeof e},le={}.hasOwnProperty,ue=function(e){return null==e},ce=function(e){return e===!1||null==e},de=o(function(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}),pe=o(function(e){return e.toLowerCase()}),he=void 0;try{he=new MessageChannel}catch(fe){}var ve=he?function(e){he.port1.onmessage=e,he.port2.postMessage("")}:setTimeout,ye={vnode:function(e){var t=e.attributes;if(t&&!se(e.nodeName)){var n=t.className;n&&(t["class"]=n,delete t.className),t["class"]&&l(t,"class",a),t.style&&l(t,"style",s)}}},me=[],ge=[],be=[],xe=o(function(e){return e.replace(/^on/i,"").toLowerCase()}),Ce={},ke=o(function(e){return e.toUpperCase()}),Se={};t(K.prototype,{linkState:function(e,t){var n=this._linkedStates,o=e+"|"+(t||"");return n[o]||(n[o]=h(this,e,t))},setState:function(e,o){var r=this.state;this.prevState||(this.prevState=n(r)),t(r,se(e)?e(r,this.props):e),o&&this._renderCallbacks.push(o),D(this)},forceUpdate:function(){q(this)},render:function(){return null}});var we={h:p,Component:K,render:V,rerender:v,options:ye,hooks:ye},_e=we.Component,Fe=we.h,Ae=function(e){function t(e,n){Z.classCallCheck(this,t);var o=Z.possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e,n));return o.state={rating:0,hovering:0,focused:-1},o}return Z.inherits(t,e),Z.createClass(t,[{key:"getStyles",value:function(){return Z["extends"]({},Ne.base,this.props.isValid?Ne.valid:Ne.error)}},{key:"onBlur",value:function(){this.setState({focused:-1})}},{key:"onFocus",value:function(e,t){this.setState({focused:e}),this.props.onFocus()}},{key:"onHover",value:function(e,t){this.setState({hovering:e})}},{key:"onMouseOut",value:function(){this.setState({hovering:0})}},{key:"getTokenStyle",value:function(e){return Z["extends"]({},Ne.token,e==this.state.focused?Ne.focused:{},e<this.state.hovering?Ne.hovering:{})}},{key:"getTokens",value:function(){for(var e=[],t=this.props.steps||5,n=0;t>n;n++)e.push(Fe("button",{onBlur:this.onBlur.bind(this),onFocus:this.onFocus.bind(this,n),onMouseOver:this.onHover.bind(this,n+1),style:this.getTokenStyle(n)},"★"));return e}},{key:"getTitleStyles",value:function(){return Z["extends"]({},this.props.hasFocus?Ne.focusedTitle:{})}},{key:"render",value:function(){return Fe("div",{style:Ne.base,onMouseOut:this.onMouseOut.bind(this)},this.props.title?Fe("h3",{style:this.getTitleStyles()},this.props.title):null,this.getTokens().map(function(e){return e}))}}]),t}(_e),Ne={base:{display:"block",color:"#888",width:"90%",outline:"none",border:"none",minHeight:"100px"},token:{fontSize:"50px",cursor:"pointer",color:"#777",lineHeight:"50px",transition:"color .2s",background:"none",border:"none",outline:"none"},hovering:{color:"#EF5350"},focused:{color:"#42A5F5"},focusedTitle:{color:"#009688"}},Re=we.h,Te=we.Component,Oe=function(e){function t(e,n){Z.classCallCheck(this,t);var o=Z.possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e,n));return o.state={recording:!1,initialized:!1,recorded:!1,recordedAudioURL:""},o}return Z.inherits(t,e),Z.createClass(t,[{key:"initAudio",value:function(){navigator.getUserMedia||(navigator.getUserMedia=navigator.webkitGetUserMedia||navigator.mozGetUserMedia),navigator.cancelAnimationFrame||(navigator.cancelAnimationFrame=navigator.webkitCancelAnimationFrame||navigator.mozCancelAnimationFrame),navigator.requestAnimationFrame||(navigator.requestAnimationFrame=navigator.webkitRequestAnimationFrame||navigator.mozRequestAnimationFrame),navigator.getUserMedia({audio:{mandatory:{googEchoCancellation:"false",googAutoGainControl:"false",googNoiseSuppression:"false",googHighpassFilter:"false"},optional:[]}},this.audioInitialized.bind(this),function(e){console.log("Error getting audio"),console.log(e)})}},{key:"audioInitialized",value:function(e){this.setState({recording:!0}),this.stream=e,this.audioChunks=[],this.mediaRecorder=new MediaRecorder(this.stream),this.mediaRecorder.start();var t=this.audioChunks;this.mediaRecorder.ondataavailable=function(e){t.push(e.data)},AudioContext=window.AudioContext||window.webkitAudioContext;var n=new AudioContext,o=null,r=null,i=null;this.rafID=null,this.analyserContext=null,this.canvasWidth=null,this.canvasHeight=null;i=n.createGain(),r=n.createMediaStreamSource(this.stream),o=r,o.connect(i),this.analyserNode=n.createAnalyser(),this.analyserNode.fftSize=2048,i.connect(this.analyserNode),this.zeroGain=n.createGain(),this.zeroGain.gain.value=0,i.connect(this.zeroGain),this.zeroGain.connect(n.destination);var s=this.updateAnalysers.bind(this);s()}},{key:"updateAnalysers",value:function(e){if(!this.analyserContext){var t=document.querySelector("canvas");this.canvasWidth=t.width,this.canvasHeight=t.height,this.analyserContext=t.getContext("2d")}var n=3,o=20,r=Math.round(this.canvasWidth/(n+o)),i=new Uint8Array(this.analyserNode.frequencyBinCount);this.analyserNode.getByteFrequencyData(i),this.analyserContext.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.analyserContext.fillStyle="#F6D565",this.analyserContext.lineCap="round";for(var s=this.analyserNode.frequencyBinCount/r,a=0;r>a;++a){for(var l=0,u=Math.floor(a*s),c=0;s>c;c++)l+=i[u+c];l/=s,this.analyserContext.fillStyle="hsl( "+Math.round(90*a/r-50)+", 100%, 50%)",this.analyserContext.fillRect(a*(n+o),this.canvasHeight,o,-l)}this.state.recording&&(this.rafID=window.requestAnimationFrame(this.updateAnalysers.bind(this)))}},{key:"onRecordClick",value:function(){if(this.state.recording){this.setState({recording:!1}),this.mediaRecorder.stop();var e=new Blob(this.audioChunks,{type:"audio/ogg;"}),t=window.URL.createObjectURL(e);this.stream.getAudioTracks()[0].stop();var n,o=new FileReader,r=this;o.onload=function(){n=this.result;var e=r.drawWaveform.bind(r);e(n)},o.readAsArrayBuffer(e),this.setState({recordedAudioURL:t,recorded:!0})}else this.setState({recorded:!1}),this.initAudio()}},{key:"drawWaveform",value:function(e){var t=new Uint8Array(e),n=document.querySelector("canvas"),o=n.width,r=n.height,i=n.getContext("2d"),s=Math.ceil(t.length/o),a=r/2;i.fillStyle="#F77160",i.clearRect(0,0,o,r);for(var l=0;o>l;l++){for(var u=1,c=-1,d=0;s>d;d++){var p=(t[l*s+d]-127)/127;u>p&&(u=p),p>c&&(c=p)}i.fillRect(l,(1+u)*a,1,Math.max(1,(c-u)*a))}}},{key:"getButtonStyle",value:function(){return Z["extends"]({},this.state.recording?Le.stopButton:Le.recButton)}},{key:"onPlayClick",value:function(){var e=document.querySelector("audio");e.play()}},{key:"onFocus",value:function(){this.props.onFocus()}},{key:"render",value:function(){return Re("div",{style:Le.base},Re("div",{style:Le.buttonAndSpectrum},Re("button",{style:this.getButtonStyle(),onFocus:this.onFocus.bind(this),onClick:this.onRecordClick.bind(this)},this.state.recording?"STOP":"REC"),Re("canvas",{style:Le.spectrumAnalyzer,width:"1024",height:"80"}),this.state.recorded?Re("span",{onClick:this.onPlayClick.bind(this),style:Le.playSymbol},"▶"):null),Re("audio",{src:this.state.recordedAudioURL}),this.state.recording?Re("h2",null,"Recording..."):null)}}]),t}(Te),Le={base:{display:"block",color:"#888",padding:"20px 5%",width:"90%",border:"none",minHeight:"100px"},recButton:{width:"80px",height:"80px",background:"#C62828",color:"white",textAlign:"center",cursor:"pointer",borderRadius:"40px",transition:"all 1s",boxShadow:"0 7px 8px #CCC",flexShrink:"0",marginRight:"10px",border:"none",outline:"none"},stopButton:{width:"80px",height:"80px",background:"#37474F",color:"white",textAlign:"center",cursor:"pointer",borderRadius:"3px",transition:"all 1s",boxShadow:"0 7px 8px #CCC",flexShrink:"0",marginRight:"10px",border:"none",outline:"none"},spectrumAnalyzer:{background:"#f0f0f0",flexGrow:"1",width:"10%"},buttonAndSpectrum:{display:"flex",position:"relative"},playSymbol:{color:"white",background:"rgba(0,0,0,.2)",position:"absolute",top:"15px",right:"170px",fontSize:"35px",borderRadius:"40px",width:"50px",height:"50px",display:"block",border:"2px solid white",textAlign:"center",lineHeight:"46px",paddingLeft:"2px",cursor:"pointer"}},Me=we.h,Pe=we.Component,ze=function(e){function t(e,n){Z.classCallCheck(this,t);var o=Z.possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e,n));return o.state={focused:!1,text:o.props.text||"",height:"100px"},o}return Z.inherits(t,e),Z.createClass(t,[{key:"handleChange",value:function(e){var t=Math.max(parseInt(e.target.style.height),e.target.scrollHeight-40);this.setState({text:e.target.value,height:t})}},{key:"getStyles",value:function(){return Z["extends"]({},Be.base,this.props.isValid?Be.valid:Be.error,this.state.focused?Be.focused:{},{height:this.state.height})}},{key:"getTitleStyles",value:function(){return Z["extends"]({},this.state.focused?Be.focusedTitle:{})}},{key:"onBlur",value:function(){this.setState({focused:!1})}},{key:"onFocus",value:function(){this.setState({focused:!0}),this.props.onFocus()}},{key:"render",value:function(){return Me("div",null,this.props.title?Me("h3",{style:this.getTitleStyles()},this.props.title):null,Me("textarea",{style:this.getStyles(),placeholder:this.props.placeholder,defaultValue:this.state.text,onBlur:this.onBlur.bind(this),onFocus:this.onFocus.bind(this),onChange:this.handleChange.bind(this),maxLength:this.props.maxLength?this.props.maxLength:"auto"}),this.props.maxLength?Me("div",{style:Be.remaining},this.props.maxLength-this.state.text.length," chars remaining."):null)}}]),t}(Pe),Be={base:{display:"block",fontSize:"14pt",color:"black",padding:"0 0 10px 0",width:"100%",outline:"none",resize:"none",borderTop:"none",borderLeft:"none",borderRight:"none",borderBottom:"2px solid #999",transition:"border .5s"},focused:{borderBottom:"2px solid #009688"},focusedTitle:{color:"#009688"},valid:{},error:{},remaining:{color:"#999",fontSize:"10pt",textAlign:"right",width:"100%",marginTop:"20px"}},je=we.h,Ue=we.Component,We=function(e){function t(e,n){Z.classCallCheck(this,t);var o=Z.possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e,n));return o.state={text:o.props.text||""},o}return Z.inherits(t,e),Z.createClass(t,[{key:"onKeyDown",value:function(e){this.setState({text:e.target.value})}},{key:"onChange",value:function(e){this.setState({text:e.target.value})}},{key:"onBlur",value:function(){this.setState({focused:!1})}},{key:"onFocus",value:function(){this.setState({focused:!0}),this.props.onFocus()}},{key:"getStyles",value:function(){return Z["extends"]({},De.base,this.props.isValid?De.valid:De.error,this.state.focused?De.focused:{})}},{key:"getTitleStyles",value:function(){return Z["extends"]({},this.state.focused?De.focusedTitle:{})}},{key:"render",value:function(){return je("div",null,this.props.title?je("h3",{style:this.getTitleStyles()},this.props.title):null,je("input",{type:"text",style:this.getStyles(),placeholder:this.props.placeholder,defaultValue:this.state.text,onFocus:this.onFocus.bind(this),onBlur:this.onBlur.bind(this),onChange:this.onChange.bind(this),onKeyDown:this.onKeyDown.bind(this),maxLength:this.props.maxLength?this.props.maxLength:"auto"}),this.props.maxLength?je("div",{style:De.remaining},this.props.maxLength-this.state.text.length," chars remaining."):null)}}]),t}(Ue),De={base:{display:"block",fontSize:"14pt",color:"black",padding:"0 0 10px 0",width:"100%",outline:"none",resize:"none",borderLeft:"none",borderRight:"none",borderTop:"none",borderBottom:"2px solid #999",transition:"border .5s"},focused:{borderBottom:"2px solid #009688"},focusedTitle:{color:"#009688"},valid:{},error:{},remaining:{color:"#999",fontSize:"10pt",padding:"0px",textAlign:"right",width:"100%",marginTop:"5px"}},He=we.h,qe=we.Component,Ge=function(e){function t(e,n){Z.classCallCheck(this,t);var o=Z.possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e,n));return o.state={text:o.props.text||""},o}return Z.inherits(t,e),Z.createClass(t,[{key:"render",value:function(){return He("header",{style:Ee.base},He("h1",{style:Ee.h1},this.props.text))}}]),t}(qe),Ee={base:{display:"block",background:"#1565C0",padding:"40px 20px"},h1:{fontSize:"18pt",fontWeight:"600",color:"white"}},Ie=Ae,Ke=Oe,Ve=ze,$e=We,Ze=Ge,Je=Object.freeze({Rating:Ie,Audio:Ke,TextArea:Ve,TextField:$e,Header:Ze}),Qe=we.h,Xe=we.Component,Ye=function(e){function t(e,n){Z.classCallCheck(this,t);var o=Z.possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e,n));return o.state={},o}return Z.inherits(t,e),Z.createClass(t,[{key:"render",value:function(){return Qe("div",{style:et.base},Qe(Je[this.props.component],Z["extends"]({},this.props)))}}]),t}(Xe),et={base:{}},tt=we.h,nt=we.Component,ot=function(e){function t(e,n){Z.classCallCheck(this,t);var o=Z.possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e,n));return o.state={currentStep:0,showFieldNumbers:!0},o}return Z.inherits(t,e),Z.createClass(t,[{key:"onFocus",value:function(e){this.setState({currentStep:e})}},{key:"getFieldWrapperStyles",value:function(e,t){return Z["extends"]({},rt.formFieldWrapper,this.state.currentStep==t?rt.focused:rt.blurred,"field"==e.type?rt.withNumber:"")}},{key:"previousStep",value:function(){this.setState({currentStep:this.state.currentStep-1})}},{key:"nextStep",value:function(){this.setState({currentStep:this.state.currentStep+1})}},{key:"onKeyDown",value:function(e){console.log(e,this.state.currentStep)}},{key:"render",value:function(){var e=this;return tt("div",{style:rt.base,onKeyDown:this.onKeyDown.bind(this)},this.props.form.page.children.map(function(t,n){return tt("div",{style:e.getFieldWrapperStyles(t,n)},e.state.showFieldNumbers?tt("span",{style:rt.fieldNumber},n+1,"."):null,tt(Ye,Z["extends"]({component:t.component,key:n,index:n,focusable:t.focusable,hasFocus:e.state.currentStep==n,onFocus:e.onFocus.bind(e,n)},t.props)))}))}}]),t}(nt),rt={base:{background:"#eee"},formFieldWrapper:{borderBottom:"1px solid #999",transition:"opacity .5s",position:"relative",background:"white"},withNumber:{padding:"15px 15px 15px 40px"},fieldNumber:{color:"#777",position:"absolute",top:"15px",left:"0px",width:"30px",textAlign:"right"},blurred:{opacity:.4},focused:{opacity:1}},it=we.h;we.render(it("div",null,it(ot,$)),document.body)}();